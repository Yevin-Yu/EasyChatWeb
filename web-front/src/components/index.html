<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="dropArea" class="drop">
        <p>将图片拖放至此处，或点击此处选择图片</p>
        <img id="preview" src="" alt="预览图片">
    </div>
</body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const dropArea = document.getElementById('dropArea');
    const preview = document.getElementById('preview');

    // 阻止默认行为（如拖放时打开链接）
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });

    // 点击时显示文件选择器
    dropArea.addEventListener('click', () => {
        dropArea.querySelector('input[type=file]').click();
    });

    // 处理文件选择器选择的文件
    dropArea.addEventListener('change', handleFiles, false);

    // 处理拖放事件
    dropArea.addEventListener('drop', handleDrop, false);

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    function highlight(bool) {
        dropArea.style.border = bool ? '2px solid #009688' : '2px dashed #ccc';
    }

    function handleFiles(e) {
        console.log(e);

        const files = e.target.files || e.dataTransfer.files;
        if (!files.length)
            return;

        createImage(files[0]);
        reset(e);
    }

    function handleDrop(e) {
        console.log(e)
        const dt = e.dataTransfer;
        const files = dt.files;
        console.log(files)
        if (!files.length)
            return;

        createImage(files[0]);
        reset(e);
    }

    function createImage(file) {
        let reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function reset(e) {
        e.target.className = e.type === 'dragleave' ? '' : 'drop';
        highlight(false);
    }
});
</script>
<style>
    .drop {
        width: 300px;
        height: 300px;
        border: 2px dashed #ccc;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        cursor: pointer;
    }
</style>